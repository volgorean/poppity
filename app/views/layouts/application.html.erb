<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Poppity</title>
    <%= csrf_meta_tags %>

    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
  </head>

  <body>
    <div class="middle">
      <nav class="flexi-c r">
        <div class="nav-left flexi-i flexi-c r">
          <a href="/" id="logo"></a>

          <div class="flexi-i drop-down-parent">
            <p class="menu-item">Collections</p>

            <ul class="drop-down">
              <% Collection.all.each do |c| %>
                <li class="flexi-c r drop-item">
                  <%= link_to "", collection_path(c), class: "flexi-i drop-icon" %>

                  <div class="flexi-i drop-text">
                    <%= link_to c.name, collection_path(c), class: "drop-title" %>
                    <p><%= c.badges_count %> badges</p>
                  </div>
                </li>
              <% end %>
            </ul>
          </div>

          <div class="flexi-i drop-down-parent">
            <p class="menu-item">Categories</p>

            <ul class="drop-down">
              <% Category.all.each do |c| %>
                <li class="flexi-c r drop-item">
                  <%= link_to "", category_path(c), class: "flexi-i drop-icon" %>

                  <div class="flexi-i drop-text">
                    <%= link_to c.name, category_path(c), class: "drop-title" %>
                    <p><%= c.badges_count %> badges</p>
                  </div>
                </li>
              <% end %>
            </ul>
          </div>
        </div>


        <div class="nav-right flexi-i flexi-c r">
          <% if current_user %>
            <%= link_to "me", me_path, class: "menu-item" %>
            <%= link_to "logout", logout_path, method: :delete, class: "menu-item menu-arrow" %>
          <% else %>
            <%= link_to "sign in", login_page_path, class: "menu-item" %>
            <%= link_to "sign up", register_page_path, class: "menu-item" %>
          <% end %>
        </div>
      </nav>

      <main>
        <% flash_messages.each do |m| %>
          <div class="flash <%= m[:kind] %>">
            <%= m[:text] %>
            <span class="close" onclick="this.parentNode.parentNode.removeChild(this.parentNode)">âœ–</span>
          </div>
        <% end %>

        <%= yield %>
      </main>

      <footer></footer>
    </div>
  </body>
</html>
